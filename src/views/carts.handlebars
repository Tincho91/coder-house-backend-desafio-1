<div class="container mt-5">
  <h1 class="mb-4">All Carts</h1>
  <ul class="list-group">
    {{#each carts}}
      <li class="list-group-item">
        <div class="d-flex justify-content-between align-items-center">
          {{user.email}}
          <button class="btn btn-primary" type="button" data-bs-toggle="collapse" data-bs-target="#cart-{{_id}}" aria-expanded="false" aria-controls="cart-{{_id}}">
            Toggle Details
          </button>
        </div>
        <div class="collapse mt-3" id="cart-{{_id}}">
          <ul class="list-group list-group-flush">
            {{#each products}}
              <li class="list-group-item">
                <strong>{{productId.title}}</strong> (Quantity: {{quantity}}) Price: ${{productId.price}}
              </li>
            {{/each}}
          </ul>
          <div class="mt-3">
            <strong>Total price for this cart: </strong><span class="cart-total">${{cartTotal products}}</span>
          </div>
        </div>
      </li>
    {{/each}}
  </ul>
  <div class="mt-3">
    <strong>Overall total: </strong><span id="overall-total">${{overallTotal carts}}</span>
  </div>
</div>

<script src="/static/js/carts.js"></script>